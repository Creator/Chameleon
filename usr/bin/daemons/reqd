programs.daemonize()
  :addEvent('require_request', function(ev, type, id)
    print(ev, type, id)
    if type == 'derp' then
      coroutine.fire('require_success', 1)
    else
      return 2
    end
  end)
  :run(...)
